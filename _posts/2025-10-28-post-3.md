---
layout: post
title: "ES/ Bloquea el tracking invisible con Pi-hole en una Raspberry Pi vieja // EN/ Block invisible tracking with Pi-hole on an old Raspberry Pi"
date: 2025-10-28
author: Damalga
comments: false
---

ES/ Aqu√≠ el <a href="#" target="_blank" rel="noopener noreferrer">bolet√≠n</a> que hace referencia a este post. //
EN/ Here is the <a href="#" target="_blank" rel="noopener noreferrer">newsletter</a> which refers to this post.

---

- [üá™üá∏ Espa√±ol](#es) | [üá¨üáß English](#en)

---

<span id="es"></span>
## üá™üá∏ Espa√±ol

### Introducci√≥n

Esta gu√≠a te ense√±a a convertir una Raspberry Pi en un bloqueador de anuncios y trackers para toda tu red dom√©stica. Sin servicios externos ni cuotas mensuales.

Lo que vas a conseguir:

- Bloquear trackers invisibles (Google Analytics, Facebook Pixel...)
- Eliminar redes de anuncios (DoubleClick, Criteo, Taboola...)
- Cortar telemetr√≠a no deseada (Windows, Smart TVs, Apple...)
- Protecci√≥n contra malware y phishing

Importante: Pi-hole bloquea a nivel DNS, lo que significa que NO puede bloquear anuncios de YouTube (por ejemplo, ya que provienen del mismo dominio que los v√≠deos). Para eso necesitar√°s un navegador al que instalar la extensi√≥n uBlock, personalmente uso <a href="https://librewolf.net/" target="_blank" rel="noopener noreferrer">Librewolf</a> (que ya la trae de serie), un fork de Firefox pensado en la privacidad y/o <a href="https://brave.com/" target="_blank" rel="noopener noreferrer">Brave</a>, un fork de Chromium que en lugar de uBlock, usa su propio bloqueador de anuncios llamado Brave Shields.

Pi-hole y estos navegadores son capas totalmente complementarias.

Tiempo estimado: 1 hora
Dificultad: Principiante (sin miedo a la terminal)

---

### Requisitos

Raspberry Pi (cualquier modelo, hasta las de 512MB sirven)

Wallapop/Milanuncios ‚Üí 15-35‚Ç¨ (Por esos precios, casi seguro que son modelos viejos, pero si el estado es bueno te vale)

- Tarjeta microSD (8GB m√≠nimo)
- Cargador USB (5V 2A)
- Cable ethernet (para conectarla al router)
- Teclado y pantalla HDMI (solo para el setup inicial)
- Tu ordenador (para controlarla por SSH despu√©s)

---

### Conceptos b√°sicos

¬øQu√© es DNS?
La "gu√≠a telef√≥nica" de internet. Traduce google.com ‚Üí 142.250.185.46

¬øQu√© hace Pi-hole?
Es un servidor DNS con lista negra. Cuando algo en tu red pregunta "¬ød√≥nde est√° ads.facebook.com?", Pi-hole responde: "No se de que me hablas"

---

### Paso 1: Preparar la tarjeta SD

- Descarga Raspberry Pi Imager
- Conecta la SD a tu ordenador
- Abre Imager
- OS: Raspberry Pi OS (other) ‚Üí Raspberry Pi OS Lite (32 o 64-bit, dependiendo de tu modelo)
- Storage: Tu SD
- Espera 5-10 min

Una vez terminado, saca la SD de tu ordenador.

---

### Paso 2: Primer arranque con teclado y pantalla

- Inserta la SD en la Pi
- Conecta el cable ethernet de la Pi al router
- Conecta un teclado USB y un cable HDMI a una pantalla
- Enchufa el cargador
- Espera a que arranque (ver√°s texto en la pantalla)

Primera vez tendr√°s que crear: Usuario y Contrase√±a (ap√∫ntala bien).

---

### Paso 3: Habilitar SSH (Secure Shell)

Una vez dentro de la Pi (con teclado y pantalla conectados):

```bash
sudo raspi-config
```

Navega con las flechas del teclado:
1. **Interface Options**
2. **SSH**
3. **Yes** (habilitar)
4. **Finish**

**Ahora averigua la IP de tu Pi:**
```bash
hostname -I
```

Te dar√° algo como `192.168.1.50` ‚Üí **Ap√∫ntala**

Ya puedes **apagar la Pi, desconectar teclado y pantalla**:
```bash
sudo shutdown now
```

Despu√©s vuelve a enchufarla, solo con el cable ethernet conectado a tu router.

---

### Paso 4: Conectarte por SSH desde tu ordenador

Ahora que la Pi est√° sin teclado ni pantalla (solo cable ethernet), contr√≥lala desde tu ordenador.

**Abre terminal en tu ordenador y con√©ctate:**
```bash
ssh usuario@IP-QUE-ANOTASTE
```

- Primera vez te pregunta si conf√≠as ‚Üí escribe `yes`
- Introduce la contrase√±a que configuraste

**¬°Ya est√°s dentro!** El resto de pasos los har√°s desde aqu√≠.

---

### Paso 5: Actualizar sistema

```bash
sudo apt update && sudo apt upgrade -y
```

Tardar√° unos 5-10 minutos.

---

### Paso 6: Instalar Pi-hole

```bash
curl -sSL https://install.pi-hole.net | bash
```

**Wizard interactivo (responde con las flechas):**

| Pregunta | Respuesta |
|----------|-----------|
| Static IP? | Continue |
| Upstream DNS | **Quad9 (filtered, DNSSEC)** ‚Üê Recomendado |
| IPv4/IPv6 | IPv4 (o ambos) |
| Static IP confirm | Yes |
| Web interface | Yes |
| Web server | Yes |
| Log queries | Yes (Show everything) |
| Privacy mode | Show everything (0) |

**Al final te da una contrase√±a ‚Üí ¬°GU√ÅRDALA!**

---

### Paso 7: A√±adir listas de bloqueo

Por defecto Pi-hole viene sin listas. Vamos a a√±adir una manualmente desde el panel web:

1. Abre en tu navegador: `http://IP-DE-TU-PI/admin`
2. Login con la contrase√±a que te dio al instalar
3. **Group Management ‚Üí Adlists**
4. Pega esto en **Address**:
   ```
   https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
   ```
5. **Add**
6. **Tools ‚Üí Update Gravity** ‚Üí **Update**

---

### Paso 8: Configurar tu router para usar Pi-hole

Ahora viene la magia: hacer que los dispositivos de tu red usen Pi-hole como DNS.

**IMPORTANTE:** Pi-hole NO afecta autom√°ticamente a todos tus dispositivos. Solo funcionar√° en aquellos que obtengan su DNS desde el router. Si alg√∫n dispositivo tiene configurado manualmente un DNS (como 8.8.8.8 de Google), ese dispositivo NO pasar√° por Pi-hole.

**Configura el router:**

1. **Accede al panel de tu router**
   - Normalmente: `192.168.1.1` o `192.168.0.1`
   - Usuario/contrase√±a: Si no los sabes, mira en la **etiqueta del router** (puede estar en la parte de abajo, tendr√°s que darle la vuelta..:)

2. **Busca la secci√≥n DHCP / LAN / DNS**
   - Cada router es diferente, pero busca algo como:
     - "DHCP Server"
     - "LAN Settings"
     - "DNS Settings"
     - "Primary DNS" / "Secondary DNS"

3. **Configura los DNS:**
   - **DNS Primario:** IP de tu Pi (ejemplo: `IP-DE-TU-PI`)
   - **DNS Secundario:** La misma IP de tu Pi

4. **Guarda y reinicia el router**

‚ö†Ô∏è **Crucial sobre DNS secundario:**

Mucha gente piensa que el DNS secundario es un "backup" por si el primario falla. **Eso NO es cierto**. Los dispositivos pueden usar cualquiera de los dos DNS aleatoriamente. Si pones `8.8.8.8` en el secundario, muchas queries ir√°n directamente a Google y Pi-hole no las ver√° (ni las bloquear√°).

**Por eso es FUNDAMENTAL poner la IP de tu Pi tanto en primario como en secundario.**

---

### Paso 9: Verificar que funciona

**Test 1:**
```bash
nslookup doubleclick.net
```

Debe salir:
```
Server: 192.168.1.50  (tu Pi)
Address: 0.0.0.0      (bloqueado)
```

Si sale otro servidor ‚Üí tu dispositivo NO usa Pi-hole.

**Test 2:**
Visita `http://doubleclick.net` en el navegador ‚Üí deber√≠a dar error.

**Test 3:**
Panel web `http://IP-PI/admin` ‚Üí **Tools ‚Üí Query Log**

Navega por internet y ver√°s l√≠neas:
- Permitidas
- Bloqueadas (¬°Esto es lo que quieres ver!)

---

### Gesti√≥n y soluci√≥n de problemas

**Comandos b√°sicos que necesitar√°s:**

```bash
pihole status              # Ver estado de Pi-hole
sudo pihole -g             # Actualizar listas de bloqueo (hazlo 1 vez al mes)
pihole -q dominio.com      # Comprobar si un dominio est√° bloqueado
pihole -w dominio.com      # A√±adir a whitelist (desbloquear)
pihole -t                  # Ver queries en tiempo real
pihole -up                 # Actualizar Pi-hole a √∫ltima versi√≥n
```

**Problemas comunes:**

- **Mis dispositivos no usan Pi-hole:** Reinicia router y dispositivos. Verifica que configuraste el DNS correctamente (IP de la Pi en primario Y secundario).

- **Firefox ignora Pi-hole:** Tiene DNS-over-HTTPS activado. Desact√≠valo: Firefox ‚Üí Configuraci√≥n ‚Üí Buscar "DNS" ‚Üí DNS sobre HTTPS: Desactivado

- **Una web/app dej√≥ de funcionar:** Falso positivo. Desde panel web: Query Log ‚Üí Click en el dominio bloqueado ‚Üí Whitelist. O por terminal: `pihole -w dominio-legitimo.com`

**Mantenimiento regular:**

- Actualiza listas 1 vez al mes: `sudo pihole -g`
- Haz backup de tu configuraci√≥n: Panel web ‚Üí Settings ‚Üí Teleporter ‚Üí Backup

---

## Bonus: Pi-hole + Tailscale (√∫salo fuera de casa)

Si hiciste mi <a href="TU_URL_GUIA_NEXTCLOUD" target="_blank" rel="noopener noreferrer">gu√≠a anterior de Nextcloud + Tailscale</a>, ya tienes Tailscale configurado. Puedes hacer que Pi-hole funcione **incluso fuera de casa** (trabajo, hotel, datos m√≥viles).

**Setup r√°pido:**

```bash
# 1. Instala Tailscale en la Pi
curl -fsSL https://tailscale.com/install.sh | sh
sudo tailscale up

# 2. Apunta la IP Tailscale de tu Pi (100.x.x.x)
```

3. Ve a <a href="https://login.tailscale.com/admin/dns" target="_blank" rel="noopener noreferrer">login.tailscale.com/admin/dns</a> y a√±ade esa IP como DNS.

**Resultado:** Tracking bloqueado est√©s donde est√©s.

‚ö†Ô∏è Si Tailscale interfiere con Pi-hole local: `sudo tailscale set --accept-dns=false`

---

### Fin

Ya tienes tu propio bloqueador de anuncios y trackers funcionando. Sin cuotas ni sin servicios de terceros, todo bajo tu control.

Ahora descubre qu√© empresas te segu√≠an sin que lo supieras. Entra al Query Log tras un poco de uso y prep√°rate.

Si tienes cualquier duda, estar√© encantado de que contactes conmigo e intentemos resolver cualquier problema que te surja.

**Lo invisible se hace visible**

---

### Recursos

- **Docs oficiales:** <a href="https://docs.pi-hole.net/" target="_blank" rel="noopener noreferrer">https://docs.pi-hole.net/</a>
- **Comunidad:** <a href="https://reddit.com/r/pihole" target="_blank" rel="noopener noreferrer">https://reddit.com/r/pihole</a>
- **Mi gu√≠a anterior:** <a href="TU_URL_GUIA_NEXTCLOUD" target="_blank" rel="noopener noreferrer">Nextcloud + Tailscale + Navidrome</a>

---



<span id="en"></span>
## üá¨üáß English

### Introduction

This guide will walk you through converting a Raspberry Pi into an ad and tracker blocker for your entire home network. No external services, no monthly fees.

What you'll achieve:
- Block invisible trackers (Google Analytics, Facebook Pixel...)
- Eliminate ad networks (DoubleClick, Criteo, Taboola...)
- Cut unwanted telemetry (Windows, Smart TVs, Apple...)
- Protection against malware and phishing

**Important:** Pi-hole blocks at the DNS level, which means it CANNOT block YouTube ads (for example, since they come from the same domain as the videos). For that you'll need a browser with uBlock extension, I personally use <a href="https://librewolf.net/" target="_blank" rel="noopener noreferrer">Librewolf</a> (which comes with it by default), a Firefox fork focused on privacy and/or <a href="https://brave.com/" target="_blank" rel="noopener noreferrer">Brave</a>, a Chromium fork that instead of uBlock, uses its own ad blocker called Brave Shields.

Pi-hole and these browsers are completely complementary layers.

**Estimated time:** 1 hour
**Difficulty:** Beginner (not afraid of the terminal)

---

### Requirements

- **Raspberry Pi** (any model, even 512MB ones work)
  - Second-hand ‚Üí $15-35 (At these prices, they're almost certainly old models, but if they're in good condition they'll work)
- **microSD card** (8GB minimum)
- **USB charger** (5V 2A)
- **Ethernet cable** (to connect to router)
- **Keyboard and HDMI monitor** (only for initial setup)
- **Your computer** (to control it via SSH afterwards)

---

### Basic concepts

#### What is DNS?
The internet's "phone book". It translates `google.com` ‚Üí `142.250.185.46`

#### What does Pi-hole do?
It's a DNS server with a blacklist. When something on your network asks "where is `ads.facebook.com`?", Pi-hole responds: "I don't know what you're talking about"

---

### Step 1: Prepare the SD card

Download <a href="https://www.raspberrypi.com/software/" target="_blank" rel="noopener noreferrer">Raspberry Pi Imager</a>

1. Connect the SD to your computer
2. Open Imager
3. **OS:** Raspberry Pi OS (other) ‚Üí **Raspberry Pi OS Lite (32 or 64-bit, depending on your model)**
4. **Storage:** Your SD
5. **Write** ‚Üí Wait 5-10 min

Once finished, remove the SD from your computer.

---

### Step 2: First boot with keyboard and monitor

1. Insert the SD into the Pi
2. Connect the **ethernet cable** from Pi to router
3. Connect a **USB keyboard** and **HDMI cable to a monitor**
4. Plug in the charger
5. **Wait for boot** (you'll see text on screen)

**First time you'll need to create:** Username and Password (write it down).

---

### Step 3: Enable SSH (Secure Shell)

Once inside the Pi (with keyboard and monitor connected):

```bash
sudo raspi-config
```

Navigate with arrow keys:
1. **Interface Options**
2. **SSH**
3. **Yes** (enable)
4. **Finish**

**Now find your Pi's IP:**
```bash
hostname -I
```

You'll get something like `192.168.1.50` ‚Üí **Write it down**

Now you can **shut down the Pi, disconnect keyboard and monitor**:
```bash
sudo shutdown now
```

Then plug it back in, only with ethernet cable connected to your router.

---

### Step 4: Connect via SSH from your computer

Now that the Pi is running without keyboard or monitor (only ethernet cable), control it from your computer.

**Open terminal on your computer and connect:**
```bash
ssh pi@IP-YOU-NOTED
```

Example:
```bash
ssh pi@192.168.1.50
```

- First time it asks if you trust it ‚Üí type `yes`
- Enter the password you configured

**You're in!** The rest of the steps you'll do from here.

---

### Step 5: Update system

```bash
sudo apt update && sudo apt upgrade -y
```

Takes 5-10 min. Go get coffee ‚òï

---

### Step 6: Install Pi-hole

```bash
curl -sSL https://install.pi-hole.net | bash
```

**Interactive wizard (answer with arrows):**

| Question | Answer |
|----------|--------|
| Static IP? | Continue |
| Upstream DNS | **Quad9 (filtered, DNSSEC)** ‚Üê Recommended |
| IPv4/IPv6 | IPv4 (or both) |
| Static IP confirm | Yes |
| Web interface | Yes |
| Web server | Yes |
| Log queries | Yes (Show everything) |
| Privacy mode | Show everything (0) |

**At the end it gives you a password ‚Üí SAVE IT!** üìù

---

### Step 7: Add blocklists

By default Pi-hole comes without lists. Let's add one manually from the web panel:

1. Open in your browser: `http://YOUR-PI-IP/admin`
2. Login with the password it gave you during installation
3. **Group Management ‚Üí Adlists**
4. Paste this in **Address**:
   ```
   https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
   ```
5. **Add**
6. **Tools ‚Üí Update Gravity** ‚Üí **Update**

**Verify it works:**

Go back to your Pi's SSH terminal and type:
```bash
sudo pihole -q doubleclick.net
```

It should say it's on the blocklist.

---

### Step 8: Configure your router to use Pi-hole

Now comes the magic: making all devices on your network use Pi-hole as DNS.

**IMPORTANT:** Pi-hole does NOT automatically affect all your devices. It will only work on those that get their DNS from the router. If any device has a DNS manually configured (like Google's 8.8.8.8), that device will NOT go through Pi-hole.

**Configure the router:**

‚ö†Ô∏è **Note:** The router interface varies a lot depending on brand and model (TP-Link, Netgear, Linksys...). Option names may be different, but the concept is the same: find where DNS is configured.

1. **Access your router's panel**
   - Usually: `192.168.1.1` or `192.168.0.1`
   - Username/password: If you don't know them, check the **router label** (might be on the bottom, you'll need to flip it over)

2. **Find the DHCP / LAN / DNS section**
   - Each router is different, but look for something like:
     - "DHCP Server"
     - "LAN Settings"
     - "DNS Settings"
     - "Primary DNS" / "Secondary DNS"

3. **Configure DNS:**
   - **Primary DNS:** Your Pi's IP (example: `192.168.1.50`)
   - **Secondary DNS:** The same Pi IP (example: `192.168.1.50`)

4. **Save and restart router**

‚ö†Ô∏è **Crucial about secondary DNS:**

Many people think secondary DNS is a "backup" in case the primary fails. **That's NOT true**. Devices can use either DNS randomly. If you put `8.8.8.8` in secondary, many queries will go directly to Google and Pi-hole won't see them (or block them).

**That's why it's ESSENTIAL to put your Pi's IP in both primary and secondary.**

---

**Also configure your devices:**

In my experience, **configuring only the router was NOT enough**. I also had to manually configure the DNS on each device (computer, phone, tablet...).

**How to do it depends on the operating system:**

- **Linux:** Network settings ‚Üí Your connection ‚Üí IPv4 ‚Üí DNS ‚Üí Add your Pi's IP
- **Windows:** Control Panel ‚Üí Network Center ‚Üí Adapter ‚Üí Properties ‚Üí IPv4 ‚Üí DNS ‚Üí Add your Pi's IP
- **Mac:** System Preferences ‚Üí Network ‚Üí Your connection ‚Üí Advanced ‚Üí DNS ‚Üí Add your Pi's IP
- **Android/iOS:** WiFi settings ‚Üí Your network ‚Üí Configure DNS ‚Üí Manual ‚Üí Add your Pi's IP

**Important:** In all cases, if there's an option for primary and secondary DNS, put your Pi's IP in both.

---

### Step 9: Verify it works

**Test 1:**
```bash
nslookup doubleclick.net
```

Should show:
```
Server: 192.168.1.50  (your Pi)
Address: 0.0.0.0      (blocked)
```

If it shows another server ‚Üí your device is NOT using Pi-hole.

**Test 2:**
Visit `http://doubleclick.net` in browser ‚Üí should error out.

**Test 3:**
Web panel `http://PI-IP/admin` ‚Üí **Tools ‚Üí Query Log**

Browse the internet and you'll see lines:
- üü¢ Allowed
- üî¥ Blocked ‚Üê This is what you want to see!

---

### Management and troubleshooting

**Basic commands you'll need:**

```bash
pihole status              # Check Pi-hole status
sudo pihole -g             # Update blocklists (do it once a month)
pihole -q domain.com       # Check if a domain is blocked
pihole -w domain.com       # Add to whitelist (unblock)
pihole -t                  # View queries in real-time
pihole -up                 # Update Pi-hole to latest version
```

**Common issues:**

- **My devices don't use Pi-hole:** Restart router and devices. Verify you configured DNS correctly (Pi's IP in both primary AND secondary).

- **Firefox ignores Pi-hole:** It has DNS-over-HTTPS enabled. Disable it: Firefox ‚Üí Settings ‚Üí Search "DNS" ‚Üí DNS over HTTPS: Disabled

- **A website/app stopped working:** False positive. From web panel: Query Log ‚Üí Click blocked domain ‚Üí Whitelist. Or via terminal: `pihole -w legitimate-domain.com`

**Regular maintenance:**

- Update lists once a month: `sudo pihole -g`
- Backup your configuration: Web panel ‚Üí Settings ‚Üí Teleporter ‚Üí Backup

---

## Bonus: Pi-hole + Tailscale (use it outside home)

If you did my <a href="TU_URL_GUIA_NEXTCLOUD" target="_blank" rel="noopener noreferrer">previous Nextcloud + Tailscale guide</a>, you already have Tailscale configured. You can make Pi-hole work **even outside home** (work, hotel, mobile data).

**Quick setup:**

```bash
# 1. Install Tailscale on Pi
curl -fsSL https://tailscale.com/install.sh | sh
sudo tailscale up

# 2. Note down your Pi's Tailscale IP (100.x.x.x)
```

3. Go to <a href="https://login.tailscale.com/admin/dns" target="_blank" rel="noopener noreferrer">login.tailscale.com/admin/dns</a> and add that IP as DNS.

**Result:** Tracking blocked wherever you are.

‚ö†Ô∏è If Tailscale interferes with local Pi-hole: `sudo tailscale set --accept-dns=false`

---

### Done

You now have your own ad and tracker blocker running on a recycled Raspberry Pi. No fees, no third-party services, 100% under your control.

Now discover which companies were tracking you without you knowing. Enter the Query Log and prepare to be surprised.

If you have any questions, I'll be happy if you get in touch and we'll try to solve any issues you might have together.

**The invisible becomes visible** üëÅÔ∏è

---

### Resources

- **Official docs:** <a href="https://docs.pi-hole.net/" target="_blank" rel="noopener noreferrer">https://docs.pi-hole.net/</a>
- **Community:** <a href="https://reddit.com/r/pihole" target="_blank" rel="noopener noreferrer">https://reddit.com/r/pihole</a>
- **My previous guide:** <a href="TU_URL_GUIA_NEXTCLOUD" target="_blank" rel="noopener noreferrer">Nextcloud + Tailscale + Navidrome</a>

---
